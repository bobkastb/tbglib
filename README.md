# tbglib
Библиотека для Golang содержит:
- Класс buffers.ASyncBufferRdLines. Буффер для тех  хочет ждать данных из него по каналу.Например может использоваться для чтения pipe , exec.Cmd.Stdout, exec.Cmd.Stderr. 
- Класс pool_ar.Basic_Pool (и интерфейс IPoolOfResource). Этот пул распределяет ресурсы по задачам. 
- Класс pool_ar.PoolOfWorker . Этот пул распределяет задачи по ресурсам. 
- Класс process.Process_Basic: обертка для встроенной обертки "exec.Cmd" (процессы ОС). Может использоваться в  IPoolOfResource и PoolOfWorker
- Мелкие полезности (модуль tools)
- Пул ресурсов и потоков сделаны для гомогенной обработки задач с высокой вычислительной нагрузкой 

# Гомогенная обработка заданий с высокой вычислительной нагрузкой 
Для решения этой задачи используется два различных независимых механизма. Пул потоков и пул ресурсов.
При использовании пула потоков, задачи поступают из входного канала (chan) обрабатываются в одной из горутин пула и результат обработки записывается в выходной канал.
При использовании пула ресурсов, нет привязки к механизму выполнения задач, ресурсы (ISingleResource) свободно распределяются
## Пул потоков pool_ar.PoolOfWorker 
- Пул распределяет задачи по ресурсам. Для захвата задачи и выдачи результата используется два канала (chan)
- Каждому захвату задачи соотвествует выдача результата. 
- Для выполнения задач есть фиксированное количество горутин. Каждая горутина имеет только один "ресурс" (ISingleResource) , для выполнения только одной задачи в произвольный момент времени
- Время выполнения каждой задачи ограничено
- Время загрузки и завершения ресурса ограничено
- Ресурс может самопроизвольно завершаться
## Пул ресурсов pool_ar.Basic_Pool 
Для общения есть интерфейс IPoolOfResource  
- Пул распределяет ограниченное количество ресурсов гомогенного типа по задачам. 
- Захват ресурса с ожиданием и возможность прерывания (метод Fetch). Прерывания передаются через произвольный набор каналов в параметрах Fetch
- Возврат ресурса (метод Release).
- Ресурс может самопроизвольно уничтожаться но должен сообщать об этом в пул
- Максимальное количество активных ресурсов ограничивается. 
- Ресурсы создаются по мере необходимости.
- Каждому Fetch - свой Release

## Процесс ОС - process.Process_Basic: 
- обертка для встроенной обертки "exec.Cmd" (процессы ОС). 
- Может распределяться как ресурс для IPoolOfResource и PoolOfWorker
- Потоки stdout,stdin реализованы через buffs.ASyncBufferRdLines.  Это дает возможность ожидать вывода процесса через канал (chan)
- Принадлежность к пулу ресурсов.

# Асинхронный буфер buffers.ASyncBufferRdLines
- ASyncBufferRdLines используется для асинхронного чтения из объектов с интерфейсом io.Writer. Например может использоваться для чтения pipe , exec.Cmd.Stdout, exec.Cmd.Stderr. 
- При поступлении данных (вызове Write(buff []byte)) генерируется 2 сигнала (в канал Sig_chan и каллбэк Sig_cb ). 
- Это позволяет асинхронно ожидать появления данных в буфере (чтением из канала Sig_chan).Достаточно подставить ASyncBufferRdLines стандарной обертке процесса в go , и можно ожидать данных из его Stdout с помошью ожидания канала
